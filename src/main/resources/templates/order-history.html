<!DOCTYPE html>
<html lang="en" th:replace="base :: layout(~{::section})">
<section style="background: #f8f9fa; min-height: 100vh; padding: 50px 0;">

  <div class="container">
    <h3 class="mb-5 text-center fw-bold text-primary">My Orders</h3>

    <div class="row g-4">
      <div class="col-lg-4 col-md-6" th:each="order : ${orders}">
        <div class="card h-100 border-0 shadow-sm order-card position-relative overflow-hidden" 
             style="transition: transform 0.3s, box-shadow 0.3s;">
          
          <!-- Status Badge -->
          <span class="position-absolute top-0 end-0 m-3 px-3 py-1 rounded-pill text-white fw-bold"
                th:classappend="${
                  order.status.name() == 'PENDING' ? 'bg-warning' :
                  (order.status.name() == 'PROCESSING' ? 'bg-primary' :
                  (order.status.name() == 'SHIPPED' ? 'bg-info' :
                  (order.status.name() == 'DELIVERED' ? 'bg-success' :
                  (order.status.name() == 'CANCELLED' ? 'bg-danger' : 'bg-secondary'))))
                }"
                th:text="${order.status.name()}"></span>

          <div class="card-body d-flex flex-column">
            <h5 class="card-title mb-2">Order #<span th:text="${order.id}"></span></h5>
            <p class="text-muted mb-3">
              <i class="bi bi-calendar me-1"></i>
              <span th:text="${#temporals.format(order.createdAt, 'dd MMM yyyy, HH:mm')}"></span>
            </p>
            <p class="fw-semibold mb-3">Total: $<span th:text="${order.totalPrice}"></span></p>

            <!-- Product Preview -->
            <div th:if="${order.items != null and !order.items.isEmpty()}" class="d-flex align-items-center mb-3">
              <img th:src="@{${order.items[0].product.image}}" alt="Product"
                   class="rounded me-3" style="width: 60px; height: 60px; object-fit: cover;">
              <div>
                <h6 class="mb-0" th:text="${order.items[0].product.name}"></h6>
                <small class="text-muted" th:if="${order.items.size() > 1}"
                       th:text="'+' + ${order.items.size() - 1} + ' more item(s)'"></small>
              </div>
            </div>

            <a th:href="@{'/order/history/' + ${order.id}}" 
               class="btn btn-primary mt-auto w-100 shadow-sm">
              <i class="bi bi-eye me-1"></i> View Details
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Bootstrap Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

  <style>
    /* ---------- Modern Order Card Hover ---------- */
    .order-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 35px rgba(0,0,0,0.15);
    }

    .order-card .card-title {
      font-size: 1.2rem;
      font-weight: 600;
    }

    .order-card small {
      font-size: 0.85rem;
    }

    /* Responsive tweaks */
    @media (max-width: 768px) {
      .order-card .card-title {
        font-size: 1rem;
      }
      .order-card p {
        font-size: 0.9rem;
      }
    }
  </style>

</section>
</html>
