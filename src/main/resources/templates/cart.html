<html lang="en" th:replace="base :: layout(~{::section})">
<section class="py-5" style="background: #f4f6f8;">
  <div class="container">
    <div class="card shadow-lg border-0 rounded-4">
      <div class="card-body p-4">
        <div class="d-flex justify-content-between align-items-center mb-4">
          <h3 class="fw-bold text-primary mb-0"><i class="bi bi-cart-check"></i> My Cart</h3>
          <a th:href="@{/products}" class="btn btn-outline-secondary btn-sm">
            <i class="bi bi-arrow-left"></i> Continue Shopping
          </a>
        </div>

        <div class="table-responsive">
          <table class="table align-middle table-hover text-center">
            <thead class="table-primary">
              <tr>
                <th>Image</th>
                <th>Product</th>
                <th>Price</th>
                <th>Qty</th>
                <th>Subtotal</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              <th:block th:each="item : ${cartItems}">
                <tr>
                  <td>
                    <img th:src="@{${item.product.image}}" alt="Product" class="rounded-3 cart-image" width="70" height="70">
                  </td>
                  <td>
                    <h6 class="fw-semibold mb-1" th:text="${item.product.name}"></h6>
                    <small class="text-muted" th:text="${item.product.category != null ? item.product.category.name : ''}"></small>
                  </td>
                  <td><span class="fw-bold text-success">$</span><span th:text="${item.product.price}"></span></td>
                  <td><span class="badge bg-info text-dark px-3 py-2" th:text="${item.quantity}"></span></td>
                  <td><span class="fw-bold text-dark">$</span><span th:text="${item.product.price * item.quantity}"></span></td>
                  <td>
                    <div class="d-grid gap-2">
                      <a th:href="@{/products/{id}(id=${item.product.id})}" class="btn btn-gradient-info btn-sm">
                        <i class="bi bi-eye"></i> View
                      </a>
                      <form th:action="@{/cart/remove/{id}(id=${item.id})}" method="post">
                        <button type="submit" class="btn btn-gradient-danger btn-sm">
                          <i class="bi bi-trash"></i> Remove
                        </button>
                      </form>
                    </div>
                  </td>
                </tr>
              </th:block>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
  <style>
    .cart-image { object-fit: cover; border-radius: 10px; transition: transform 0.3s; }
    .cart-image:hover { transform: scale(1.05); }
    .btn-gradient-info { background: linear-gradient(90deg, #0dcaf0, #3fc5f0); color: #fff; border-radius: 30px; transition: 0.3s; }
    .btn-gradient-info:hover { transform: scale(1.05); }
    .btn-gradient-danger { background: linear-gradient(90deg, #dc3545, #ff4e4e); color: #fff; border-radius: 30px; transition: 0.3s; }
    .btn-gradient-danger:hover { transform: scale(1.05); }
    table.table-hover tbody tr:hover { background-color: rgba(0,0,0,0.03); }
  </style>
</section>
</html>
